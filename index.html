<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DartPad Embed Runner</title>
  <script src="https://dartpad.dev/inject_embed.dart.js"></script>
</head>
<body>
  <div id="dartpad-container"></div>

  <script>
    window.addEventListener("message", function (event) {
      if (typeof event.data === "string") {
        console.log("[DartRunner] Received Dart code via postMessage:");
        console.log(event.data);

        const container = document.getElementById("dartpad-container");
        container.innerHTML = ""; // Clear any previous content

        // Inject the DartPad iframe dynamically
        injectEmbed({
          mode: "dart",
          theme: "dark",
          run: true,
          split: "50",
          code: event.data,
          elementId: "dartpad-container",
          width: "100%",
          height: "500px",
        });
      }
    });
  </script>
</body>
</html>
