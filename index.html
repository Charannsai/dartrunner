<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>DartPad Runner</title>
    <script src="https://dartpad.dev/inject_embed.dart.js"></script>
  </head>
  <body>
    <div id="dartpad-container"></div>

    <script>
      window.addEventListener("message", function (event) {
        if (typeof event.data === "string") {
          const sourceCode = event.data;

          // Clean previous iframe
          const container = document.getElementById("dartpad-container");
          container.innerHTML = "";

          // Inject new DartPad iframe
          injectEmbed({
            width: "100%",
            height: "500px",
            mode: "dart",
            theme: "dark",
            run: true,
            split: "50",
            code: sourceCode,
            elementId: "dartpad-container"
          });
        }
      });
    </script>
  </body>
</html>
